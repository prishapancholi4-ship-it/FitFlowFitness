<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shop â€¢ FitFlow</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .badge-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: var(--space-md);
      margin-top: var(--space-lg);
    }

    .badge-card {
      background: white;
      border-radius: 18px;
      box-shadow: 0 16px 35px rgba(15, 23, 42, 0.08);
      padding: 14px 10px 12px;
      text-align: center;
      position: relative;
      overflow: hidden;
      transition: transform 0.15s ease, box-shadow 0.15s ease, opacity 0.15s ease;
    }

    .badge-card.unlocked:hover {
      transform: translateY(-3px);
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.13);
    }

    .badge-icon {
      font-size: 2rem;
      margin-bottom: 6px;
    }

    .badge-name {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .badge-desc {
      font-size: 0.75rem;
      color: var(--muted, #6b7280);
      padding: 0 6px;
    }

    .badge-tag {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      border-radius: 999px;
      padding: 2px 8px;
      margin-top: 6px;
    }

    .badge-tag.easy {
      background: rgba(110, 231, 183, 0.18);
      color: #047857;
    }

    .badge-tag.medium {
      background: rgba(96, 165, 250, 0.18);
      color: #1d4ed8;
    }

    .badge-tag.hard {
      background: rgba(251, 146, 60, 0.18);
      color: #c2410c;
    }

    .badge-card.locked {
      opacity: 0.45;
    }

    .badge-lock {
      position: absolute;
      top: 8px;
      right: 10px;
      font-size: 0.9rem;
      color: var(--muted, #6b7280);
    }

    .badge-ribbon {
      position: absolute;
      left: -34px;
      top: 12px;
      background: linear-gradient(135deg, #f472b6, #fb7185);
      color: white;
      font-size: 0.7rem;
      padding: 2px 40px;
      transform: rotate(-24deg);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }
  </style>
</head>
<body>

<div class="container">

  <h1 class="gradient-text">Shop & Badges</h1>
  <p class="subtext">Your earned badges and the ones waiting for you.</p>

  <section class="card">
    <h2>Badge gallery</h2>
    <div id="badgeGallery" class="badge-grid"></div>
  </section>

</div>

<script src="fitflow-global.js"></script>
<script>
  // 1. Define all possible badges
  const allBadges = [
    {
      id: "starter",
      name: "Starter",
      icon: "ðŸŒ±",
      description: "Complete your first log in FitFlow.",
      difficulty: "easy"
    },
    {
      id: "hydration-hero",
      name: "Hydration Hero",
      icon: "ðŸ’§",
      description: "Log your water intake for 3 days.",
      difficulty: "easy"
    },
    {
      id: "streak-5",
      name: "5â€‘Day Streak",
      icon: "ðŸ”¥",
      description: "Show up 5 days in a row.",
      difficulty: "medium"
    },
    {
      id: "streak-14",
      name: "14â€‘Day Streak",
      icon: "âš¡",
      description: "Stay consistent for 14 days.",
      difficulty: "medium"
    },
    {
      id: "mindful-master",
      name: "Mindfulness Master",
      icon: "ðŸ§˜â€â™€ï¸",
      description: "Meditate or journal for 7 days.",
      difficulty: "medium"
    },
    {
      id: "level-10",
      name: "Level 10",
      icon: "ðŸ…",
      description: "Reach level 10 in FitFlow.",
      difficulty: "hard"
    }
  ];

  // 2. Load earned badges from localStorage
  function loadEarnedBadges() {
    try {
      const raw = localStorage.getItem("fitflowBadges");
      if (!raw) return [];
      const parsed = JSON.parse(raw);
      if (Array.isArray(parsed)) return parsed;
      return [];
    } catch (e) {
      return [];
    }
  }

  const earnedBadges = loadEarnedBadges();

  // 3. Render gallery
  function renderBadgeGallery() {
    const container = document.getElementById("badgeGallery");
    if (!container) return;
    container.innerHTML = "";

    allBadges.forEach(badge => {
      const isUnlocked =
        earnedBadges.includes(badge.id) ||
        earnedBadges.includes(badge.name);

      const card = document.createElement("div");
      card.className = "badge-card " + (isUnlocked ? "unlocked" : "locked");

      if (isUnlocked) {
        const ribbon = document.createElement("div");
        ribbon.className = "badge-ribbon";
        ribbon.textContent = "Unlocked";
        card.appendChild(ribbon);
      } else {
        const lock = document.createElement("div");
        lock.className = "badge-lock";
        lock.textContent = "ðŸ”’";
        card.appendChild(lock);
      }

      const icon = document.createElement("div");
      icon.className = "badge-icon";
      icon.textContent = badge.icon;
      card.appendChild(icon);

      const name = document.createElement("div");
      name.className = "badge-name";
      name.textContent = badge.name;
      card.appendChild(name);

      const desc = document.createElement("div");
      desc.className = "badge-desc";
      desc.textContent = badge.description;
      card.appendChild(desc);

      const tag = document.createElement("div");
      tag.className = "badge-tag " + badge.difficulty;
      tag.textContent =
        badge.difficulty === "easy"
          ? "Easy"
          : badge.difficulty === "medium"
          ? "Medium"
          : "Hard";
      card.appendChild(tag);

      container.appendChild(card);
    });
  }

  renderBadgeGallery();
</script>

</body>
</html>
